{% extends "base.html" %}

{% block content %}

<h1>Random Reviews</h1>
<h4>create random reviews from Yelp reviews dataset</h4>
<p>just put stars and business type to randomly generate review</p>


boom! ... generate ...

<script>    
    function update_review() {
            var business_type = $('#businessType').val();
            var stars = $('#stars').val();
            var funny = $('#funny').val();
            var cool = $('#cool').val();
            var useful = $('#useful').val();
	    if ($('#review').data("typed") != undefined) {
                    clearInterval($('#review').data("typed").timeout);
            }
            $("#review").removeData('typed');
            $("#review").typed({
                            strings: ['Generating a new review...', 'Hold on tight!', "It won't take that long..."],
                            typeSpeed: 40,
                            showCursor: false
            });

            $.get( "generate_review/"+business_type+"/"+stars+"/"+funny+"/"+cool+"/"+useful)
              .done(function( data ) {
                  if ($('#review').data("typed") != undefined) {
                    clearInterval($('#review').data("typed").timeout);
                  }
                  $("#review").removeData('typed');
                  $("#review").typed({
                            strings: data['review'],
                            typeSpeed: 40,
                            showCursor: false
                  });
                  $('#write_button').prop("disabled",false);
              });
    };
    $(function(){
        $('#write_button').click(function() {
           $('#write_button').prop("disabled",true);
           update_review();
        });
        $("#review").typed({
                strings: ['Select the options above and click write when you are ready.'],
                typeSpeed: 40,
                showCursor: false
         });
    });
</script>

<form>
<div class="form-group">
    <label for="businessType">Business type</label>
    <select id="businessType">
      <option value="0">Restaurant</option>
      <option value="1">Entertainment</option>
      <option value="2">Food</option>
    </select>
    </div>
<div class="form-group">
    <label for="stars">Stars</label>
    <select id="stars">
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4" selected>4</option>
      <option value="5">5</option>
    </select>
</div>
<div class="form-group">
    <label for="funny">Funny</label>
    <select id="funny">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
    </select>
</div>
<div class="form-group">
    <label for="cool">Cool</label>
    <select id="cool">
      <option value="0">0</option>
      <option value="1">1</option>
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
      <option value="9">9</option>
    </select>
</div>
<div class="form-group">
<label for="useful">Useful</label>
<select id="useful">
  <option value="0">0</option>
  <option value="1">1</option>
  <option value="2">2</option>
  <option value="3">3</option>
  <option value="4">4</option>
  <option value="5">5</option>
    <option value="6">6</option>
    <option value="7">7</option>
    <option value="8">8</option>
    <option value="9">9</option>
</select>
</div>
<button id='write_button' type="button" class="btn btn-warning btn-lg">Write</button>
</form>
<h1><small><span id="review" class='large'></span></small></h1>

{% endblock %}

